##############################################################
# Managed by Puppet. Do not edit. Changes will be wiped out. #
##############################################################
<VirtualHost *:80>
	
	ServerAdmin root@localhost
    DocumentRoot /var/www/<%= name %>/public/cgi-bin
	
	ServerName <%= name %>
	
	<% if urlalias != '' -%><%= "Alias /#{urlalias}/    #{aliastgtpath}/" -%><% end %>
	
		# Execute all scripts as user $devgroupid
	SuexecUserGroup <% devgroupid %> <% devgroupid %>
	
	# Always block file system root access in /var/www/<%= name %> and higher
	
	<Directory /var/www/<%= name %>>
		AllowOverride None
		Options None
		Order Deny,allow
		Deny from all
	</Directory>
	
	
	# Alow general access at public level and below
	
	<Directory /var/www/<%= name %>/public>
		Allow from all
		Order Allow,deny
	</Directory>	
	
	<Directory /var/www/<%= name %>/public/cgi-bin>
		Options +ExecCGI
		AddHandler cgi-script .cgi
	</Directory>
	
	# set the preference to use index.cgi
	
    <Directory /var/www/<%= name %>/public/cgi-bin>
		DirectoryIndex disabled
		DirectoryIndex index.cgi			
    </Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log

	LogLevel warn

	CustomLog ${APACHE_LOG_DIR}/access.log combined
	
</VirtualHost>